<div class="container">
  <!-- Header -->
  <div class="header">
    <h1 class="title">
      <span class="title-icon">🎥</span>
      Video/Audio Lecture Summarizer
    </h1>
    <p class="subtitle">Transform your video and audio lectures into concise, organized summaries</p>
  </div>

  <!-- Upload Section -->
  <div class="upload-section" [class.dragover]="isDragOver">
    <div
      class="upload-card"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      <div class="upload-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="4" width="20" height="16" rx="2"/>
          <path d="m22 6-10 7L2 6"/>
          <circle cx="12" cy="12" r="3"/>
          <path d="M2 8v8"/>
          <path d="M22 8v8"/>
        </svg>
      </div>

      <div class="upload-content">
        <h3>Upload Your Lecture Video/Audio</h3>
        <p>Drop your lecture video or audio file here or click to browse</p>
        <p class="file-types">Supports MP3, MP4, and audio/video files</p>
      </div>

      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        accept=".mp3,.mp4,.wav,.m4a,.avi,.mov"
        class="file-input"
      />

      <button
        class="browse-btn"
        (click)="fileInput.click()"
        [disabled]="isProcessing"
      >
        Browse Files
      </button>
    </div>

    <!-- Processing Animation -->
    <div *ngIf="isProcessing" class="processing-overlay">
      <div class="processing-spinner"></div>
      <p class="processing-text">Processing your lecture...</p>
    </div>
  </div>


  <!-- Status Messages -->
  <div *ngIf="status && !isProcessing" class="status-message" [ngClass]="{
    'status-success': status === 'completed',
    'status-error': status.startsWith('error'),
    'status-info': status !== 'completed' && !status.startsWith('error')
  }">
    <div class="status-icon">
      <span *ngIf="status === 'completed'">✅</span>
      <span *ngIf="status.startsWith('error')">❌</span>
      <span *ngIf="status !== 'completed' && !status.startsWith('error')">⏳</span>
    </div>
    <span class="status-text">{{ status }}</span>
  </div>

  <!-- Summary Results -->
  <div *ngIf="summary" class="summary-section">
    <div class="summary-header">
      <h2 class="summary-title">{{ summary.title || 'Lecture Summary' }}</h2>
      <div class="summary-actions">
        <button class="action-btn download-btn" (click)="downloadPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Print PDF
        </button>
        <button class="action-btn share-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="18" cy="5" r="3"/>
            <circle cx="6" cy="12" r="3"/>
            <circle cx="18" cy="19" r="3"/>
            <path d="m8.59 13.51 6.83 3.98"/>
            <path d="m15.41 6.51-6.82 3.98"/>
          </svg>
          Share
        </button>
      </div>
    </div>

    <!-- Summary Content -->
    <div class="summary-content">
      <div class="summary-card">
        <h3 class="card-title">📝 Main Summary</h3>
        <p class="summary-text">{{ summary.summary }}</p>
      </div>

      <!-- Key Takeaways -->
      <div class="summary-card">
        <h3 class="card-title">💡 Key Takeaways</h3>
        <div class="takeaways-grid">
          <div
            class="takeaway-item"
            *ngFor="let takeaway of summary.key_takeaways; let i = index"
            [style.animation-delay.ms]="i * 100"
          >
            <span class="takeaway-number">{{ i + 1 }}</span>
            <span class="takeaway-text">{{ takeaway }}</span>
          </div>
        </div>
      </div>

      <!-- Bulleted Notes -->
      <div class="summary-card">
        <h3 class="card-title">📋 Detailed Notes</h3>
        <ul class="notes-list">
          <li
            class="note-item"
            *ngFor="let note of summary.bulleted_notes; let i = index"
            [style.animation-delay.ms]="i * 50"
          >
            {{ note }}
          </li>
        </ul>
      </div>

      <!-- Flashcards -->
      <div class="summary-card">
        <h3 class="card-title">🃏 Flashcards</h3>
        <div class="flashcards-grid">
          <div
            class="flashcard"
            *ngFor="let card of summary.flashcards; let i = index"
            [style.animation-delay.ms]="i * 100"
            (click)="toggleFlashcard(card)"
          >
            <div class="flashcard-inner" [class.flipped]="card.flipped">
              <div class="flashcard-front">
                <div class="flashcard-icon">❓</div>
                <div class="flashcard-question">{{ card.question }}</div>
              </div>
              <div class="flashcard-back">
                <div class="flashcard-icon">💡</div>
                <div class="flashcard-answer">{{ card.answer }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
